<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This site contains my personal journal.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The journal that counts</title>
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://example.com/index.html">
<link rel="next" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/2017-10-28-use-virtualenv-wrapper-for-a-specific-python-version.html" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://example.com/">

                <span id="blog-title">The journal that counts</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-10-28-use-virtualenv-wrapper-for-a-specific-python-version.html" class="u-url">Use virtualenv wrapper for a specific Python version</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-10-28-use-virtualenv-wrapper-for-a-specific-python-version.html" rel="bookmark"><time class="published dt-published" datetime="2017-10-28T20:48:00+02:00" title="2017-10-28 20:48">2017-10-28 20:48</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Use virtualenv wrapper for a specific Python version</h2>
<div class="outline-text-2" id="text-1">

<div class="highlight"><pre><span></span>➜  my-dir mkvirtualenv --python=/usr/bin/python3 nikola-journal
Already using interpreter /usr/bin/python3
Using base prefix '/usr'
New python executable in /home/pieter/.virtualenvs/nikola-journal/bin/python3
Also creating executable in /home/pieter/.virtualenvs/nikola-journal/bin/python
Installing setuptools, pkg_resources, pip, wheel...done.
(nikoal-journal) ➜  my-dir python --version
Python 3.5.2
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-10-24-exporting-org-journal-entries-for-use-with-nikola.html" class="u-url">Exporting org-journal entries for use with Nikola</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-10-24-exporting-org-journal-entries-for-use-with-nikola.html" rel="bookmark"><time class="published dt-published" datetime="2017-10-24T23:40:00+02:00" title="2017-10-24 23:40">2017-10-24 23:40</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Exporting org-journal entries for use with Nikola</h2>
<div class="outline-text-2" id="text-1">

<p>
Last week I have been busy writing Emacs Lisp code to export the contents of an
org-journal for use with the static website generator <a href="https://getnikola.com/">Nikola</a>. The goal is to let
each entry become a blog post of the website. I just pushed the first version of
the code to the new GitHub repo <a href="https://github.com/swinkels/oje">swinkels/oje</a>, where "oje" stands for
"org-journal exporter".
</p>

<p>
This first version should be "more or less" functional but still needs work to
be usable by other people than me.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-09-20-programmatically-extract-information-from-a-org-journal-entry.html" class="u-url">Programmatically extract information from a org-journal entry</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-09-20-programmatically-extract-information-from-a-org-journal-entry.html" rel="bookmark"><time class="published dt-published" datetime="2017-09-20T17:09:00+02:00" title="2017-09-20 17:09">2017-09-20 17:09</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Programmatically extract information from a org-journal entry</h2>
<div class="outline-text-2" id="text-1">
<p>
In an earlier journal entry I mentioned that I wanted to export the entries to
HTML and use that HTML directly in my <i>blog</i>. However I found the functionality to
export the entries to a site, which is called "publishing", too limited for my
use case. For example, the export does not seem to support the creation of a
"tag cloud" for the tags of each entry.
</p>

<p>
sitemap and an index.
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my-extract</span><span class="p">()</span>
  <span class="s">"Return time, clocked on current item in total."</span>
  <span class="p">(</span><span class="nf">save-excursion</span>
    <span class="p">(</span><span class="nf">save-restriction</span>
      <span class="p">(</span><span class="nf">org-narrow-to-subtree</span><span class="p">)</span>
      <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tstart</span> <span class="s">"2017-08-09"</span><span class="p">)</span> <span class="p">(</span><span class="nf">tend</span> <span class="s">"2017-08-10"</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">org-clock-sum</span>
	 <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tstart</span><span class="p">)</span>
	 <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tend</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">org-map-entries</span> <span class="ss">'my-extract</span> <span class="nv">nil</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-09-19-installing-emacs-25.x-on-ubuntu.html" class="u-url">Installing Emacs 25.x on Ubuntu</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-09-19-installing-emacs-25.x-on-ubuntu.html" rel="bookmark"><time class="published dt-published" datetime="2017-09-19T22:10:00+02:00" title="2017-09-19 22:10">2017-09-19 22:10</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Installing Emacs 25.x on Ubuntu</h2>
<div class="outline-text-2" id="text-1">

<p>
Currently I am running Ubuntu 16.04, which comes with Emacs 24.5.1, an Emacs
version from April 2015. The latest version of Emacs version is 25.3, which was
just released last week. Because I was seeing some graphical glitches in 24.5,
for example with relative line numbering in Spacemacs, I wanted to try that
latest release.
</p>

<p>
Fortunately Kevin Kelley has been so kind to provide a <a href="https://launchpad.net/~kelleyk/+archive/ubuntu/emacs">PPA for Emacs 25</a> packages
for all current Ubuntu releases. It even contains packages for Emacs 25.3. Using
this PPA installation of Emacs 25.3 was a breeze. I installed it side-by-side
with the version of Emacs that comes with Ubuntu.
</p>

<p>
I wrote this journal entry with Emacs 25.3 and so far, so good.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-09-06-the-clean-architecture.html" class="u-url">The Clean Architecture</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-09-06-the-clean-architecture.html" rel="bookmark"><time class="published dt-published" datetime="2017-09-06T23:49:00+02:00" title="2017-09-06 23:49">2017-09-06 23:49</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">The Clean Architecture</h2>
<div class="outline-text-2" id="text-1">

<p>
I googled for the terms Entities, Interactors and Boundaries and that lead me to
the following blog post by Martin from 2012, <a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">The Clean Architecture</a>. In this
post he mentions several architectures from "the last several years":
</p>
<blockquote>
<p>
Though these architectures all vary somewhat in their details, they are very
similar. They all have the same objective, which is the separation of concerns.
They all achieve this separation by dividing the software into layers.
</p>
</blockquote>
<p>
The article describes the benefits of such an approach and the architectur it
leads to.
</p>

<p>
This separation in layers is very related to guidelines I have tried to
follow for the last decade:
</p>

<ul class="org-ul">
<li>each layer considers the system at one specific level of abstraction;
</li>
<li>each layer builds upon other layers: those lower layers have a level of
abstraction that is equal to the current layer, or lower;
</li>
<li>each layer has a well-defined interface and layers only communicate through
that interface;
</li>
<li>each layer only talks to the layers below it.
</li>
</ul>
<p>
For me, designs that satisfy these requirements almost emerge automatically when
you do Test-Driven Development.
</p>

<p>
Once caveat, the fact that I try to follow these guidelines does not mean I
always succeed…
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-09-06-clean-code-episode-7--architecture--use-cases-and-high-level-design.html" class="u-url">Clean Code episode 7: Architecture, Use Cases and High Level Design</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-09-06-clean-code-episode-7--architecture--use-cases-and-high-level-design.html" rel="bookmark"><time class="published dt-published" datetime="2017-09-06T22:53:00+02:00" title="2017-09-06 22:53">2017-09-06 22:53</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Clean Code episode 7: Architecture, Use Cases and High Level Design</h2>
<div class="outline-text-2" id="text-1">
<p>
Yesterday and today I watched episode 7 of the Clean Code series on
architecture. It's a big episode that covers a lot of ground.
</p>

<p>
In this episode, Martin states that the architecture should be determined by the
use cases. He uses use cases that are independent of the delivery mechanism of
the application (web interface, console interface, …), or the persistency
mechanism (flat files, relational database, …).
</p>

<p>
That approach allows you to design the architecture independent of those
concerns. A good architecture should allow you to defer decisions related to
those concerns.
</p>

<p>
During the episode, Robert Martin refers to several books among them
</p>

<ul class="org-ul">
<li>Object Oriented Software Engineering: A Use Case Driven Approach, by Ivar
Jacobson, and
</li>
<li>Agile Software Development, by Robert Martin.
</li>
</ul>
<p>
From the book by Jacobson he uses the distinction between Entities, Interactors
and Boundaries to discuss the main elements of an architecture.
</p>

<p>
From his own book he uses a case study on how the first use cases drive the
initial architecture of a payroll system. That book is on my bookshelf, so maybe
it is time for a reread.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-09-06-buffer-switching-in-spacemacs-is-slowing-me-down.html" class="u-url">Buffer switching in Spacemacs is slowing me down</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-09-06-buffer-switching-in-spacemacs-is-slowing-me-down.html" rel="bookmark"><time class="published dt-published" datetime="2017-09-06T13:38:00+02:00" title="2017-09-06 13:38">2017-09-06 13:38</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Buffer switching in Spacemacs is slowing me down</h2>
<div class="outline-text-2" id="text-1">
<p>
While working on code, I noticed that buffer switching in Spacemacs seemed more
time consuming than I remembered from my handcrafted Emacs setup. I could not
quite put my finger on what was causing it. One obvious difference is that the
key binding for <code>C-x b</code>, by default <code>helm-mini</code>, whereas I used
<code>ido-switch-buffer</code>.
</p>

<p>
I found the following information in the documentation of an older Spacemacs
clone at <a href="https://github.com/bobbyangelov">https://github.com/bobbyangelov</a>:
</p>
<blockquote>
<p>
Some users prefer the <code>ido</code> way of navigating the file system because it can
remember the last selected directories and buffers and RET is used to open
directories insteas of <code>TAB</code> and <code>C-z</code> in helm. It is possible to use <code>ido</code>
[…] by setting the variable <code>dotspacemacs-use-ido</code> to <code>t</code>.
</p>
</blockquote>
<p>
The memory feature of <code>ido</code> might explain why I seemed to need less key strokes
for a buffer swith than with <code>helm</code>. And the difference between <code>ret</code> and <code>tab</code>
in <code>helm</code> had already bitten me multiple times when using <code>fgrep</code>. Unfortunately
variable <code>dotspacemacs-use-ido</code> does not seem to exist anymore in the current
version of Spacemacs.
</p>

<p>
Then I found <a href="https://github.com/emacs-helm/helm/issues/1492">an issue</a> in the Helm GitHub repo that indicates that as soon as a
user enters a pattern for the buffer list, the buffer list is sorted using the
length of the buffer name (huh?). As long as the user has not entered a pattern, the
buffers seem to be ordered most-recently-used first. I tried this in my current
Spacemacs installation, and it indeed works like that.
</p>

<p>
The function that handles the ordering is defined like this in my current
Spacemacs installation:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">helm-buffers-sort-transformer</span> <span class="p">(</span><span class="nf">candidates</span> <span class="nv">source</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">string=</span> <span class="nv">helm-pattern</span> <span class="s">""</span><span class="p">)</span>
      <span class="nv">candidates</span>
      <span class="p">(</span><span class="k">if </span><span class="nv">helm-buffers-fuzzy-matching</span>
	  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">helm-pattern</span> <span class="p">(</span><span class="nf">helm-buffers--pattern-sans-filters</span><span class="p">)))</span>
	    <span class="p">(</span><span class="nf">funcall</span> <span class="nv">helm-fuzzy-sort-fn</span> <span class="nv">candidates</span> <span class="nv">source</span><span class="p">))</span>
	  <span class="p">(</span><span class="nf">sort</span> <span class="nv">candidates</span>
		<span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">s1</span> <span class="nv">s2</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nf">string-width</span> <span class="nv">s1</span><span class="p">)</span> <span class="p">(</span><span class="nf">string-width</span> <span class="nv">s2</span><span class="p">)))))))</span>
</pre></div>
<p>
So it is a bit more complicated: as soon as the user has entered a pattern and
<code>helm-buffers-fuzzy-matching</code> does not hold, the buffer list is sorted using the
length of the buffer name. In case <code>helm-buffers-fuzzy-matching</code> holds, sorting
depends on the definition of <code>helm-fuzzy-sort-fn</code> and then it is off down the
rabbit hole.
</p>

<p>
So I decided to follow the suggestion in the aforementioned GitHub issue and
advice <code>helm-buffers-sort-transformer</code> to always return the buffer names in the
most-recently-used first order:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">sks-buffers-nosort-transformer</span> <span class="p">(</span><span class="nf">_</span> <span class="nv">candidates</span> <span class="nv">_</span><span class="p">)</span>
  <span class="nv">candidates</span><span class="p">)</span>

<span class="p">(</span><span class="nf">advice-add</span> <span class="ss">'helm-buffers-sort-transformer</span> <span class="nv">:around</span> <span class="ss">'sks-buffers-nosort-transformer</span><span class="p">)</span>
</pre></div>
<p>
This works fine, apart from one little thing that puzzled me when I checked the
order of the buffers: the buffer list always shows the current buffer at the
bottom of the list.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-31-spacemacs-and-the-super-star----.html" class="u-url">Spacemacs and the super star (*)</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-31-spacemacs-and-the-super-star----.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-31T21:21:00+02:00" title="2017-08-31 21:21">2017-08-31 21:21</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Spacemacs and the super star (*)</h2>
<div class="outline-text-2" id="text-1">
<p>
Spacemacs supports the Vim super star functionality to search for the current
word. When you press "*", it shows a small menu in the minibuffer called "Symbol
Highlight Transient State". This menu offers some standard key bindings to jump
to the next and previous occurrence of the word, but also some that made me go
"Wow!":
</p>

<p>
r to switch between searching for the visual buffer or the whole file
b to search all the buffers
f to search a directory of your choosing using helm-ag
/ to search the whole project using helm-ag
</p>

<p>
It just works out of the box.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-22-my-spacemacs-configuration-on-github.html" class="u-url">My Spacemacs configuration on GitHub</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-22-my-spacemacs-configuration-on-github.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-22T21:17:00+02:00" title="2017-08-22 21:17">2017-08-22 21:17</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">My Spacemacs configuration on GitHub</h2>
<div class="outline-text-2" id="text-1">
<p>
I have pushed the Git repo with my Spacemacs configuration to GitHub to
<a href="https://github.com/swinkels/spacemacs-config">swinkels/spacemacs-config</a>. The nice thing is that it is "tangled" from the
README, which is in Org mode format. The README is definately not complete yet,
but it is a start.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-18-publishing.html" class="u-url">Publishing</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-18-publishing.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-18T14:05:00+02:00" title="2017-08-18 14:05">2017-08-18 14:05</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Publishing</h2>
<div class="outline-text-2" id="text-1">

<p>
(setq org-publish-project-alist
           '(("journal"
</p>
<p>
:base-directory "<i>home/pieter/repos/bitbucket.org/journal</i>"
</p>
<p>
:publishing-directory "~/tmp/public<sub>html</sub>"
</p>
<p>
:section-numbers nil
</p>
<p>
:makeindex t
</p>
<p>
:publishing-function org-html-publish-to-html
</p>
<p>
:table-of-contents t)))
</p>

<p>
(org-publish "journal" t)
</p>
</div>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-2.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:swinkels.pieter@yahoo.com">Pieter Swinkels</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="assets/js/jquery.min.js"></script><script src="assets/js/bootstrap.min.js"></script><script src="assets/js/moment-with-locales.min.js"></script><script src="assets/js/fancydates.js"></script><script src="assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
