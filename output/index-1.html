<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="This site contains my personal journal.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The journal that counts (old posts, page 1) | The journal that counts</title>
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/html4css1.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="assets/css/theme.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://example.com/index-1.html">
<link rel="prev" href="index-2.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://example.com/">

                <span id="blog-title">The journal that counts</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="archive.html">Archive</a>
                </li>
<li>
<a href="categories/index.html">Tags</a>
                </li>
<li>
<a href="rss.xml">RSS feed</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            

    


    
<div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-15-watching-derek-wyatt-s-vim-tutorial.html" class="u-url">Watching Derek Wyatt's VIM tutorial</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-15-watching-derek-wyatt-s-vim-tutorial.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-15T13:42:00+02:00" title="2017-08-15 13:42">2017-08-15 13:42</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Watching Derek Wyatt's VIM tutorial</h2>
<div class="outline-text-2" id="text-1">
<p>
The last week or so I have been looking into Spacemacs and the Vim editing style
you can use it with. I only knew a few things about Vim so I have been reading
up on it.
</p>

<p>
Yesterday I came across the <a href="http://derekwyatt.org/vim/tutorials/index.html">Vim tutorial</a> by Derek Wyatt and just watched the
first episodes on basic cursor movement. Part of the information I had already
read in other tutorials - hey, it was about basic cursor movement - but
definately not everything.
</p>

<p>
I liked how he emphasized that to become productive in Vim, you would need to
learn to move the cursor "the Vim way", so without cursor keys or worse, the
mouse. He has an energetic and engaging teaching style and I am looking forward
to the next episodes.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-11-passing-in-seconds-to-org-clock-sum.html" class="u-url">Passing in seconds to org-clock-sum</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-11-passing-in-seconds-to-org-clock-sum.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-11T09:44:00+02:00" title="2017-08-11 09:44">2017-08-11 09:44</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Passing in seconds to org-clock-sum</h2>
<div class="outline-text-2" id="text-1">
<div class="highlight"><pre><span></span><span class="nv">The</span> <span class="nv">previous</span> <span class="nv">journal</span> <span class="nv">entry</span> <span class="nv">ended</span> <span class="nv">with</span> <span class="nv">the</span> <span class="nv">idea</span> <span class="nv">that</span> <span class="nv">we</span> <span class="nv">can</span> <span class="nv">just</span>
<span class="nv">pass</span> <span class="nv">in</span> <span class="nv">TSTART</span> <span class="k">and </span><span class="nv">TEND</span> <span class="nv">as</span> <span class="nv">seconds</span><span class="o">.</span> <span class="nv">So</span> <span class="nv">we</span> <span class="nv">try</span> <span class="nv">that:</span>
<span class="p">(</span><span class="nf">defun</span> <span class="nv">my-org-clock-sum-current-item</span> <span class="p">()</span>
  <span class="s">"Return time, clocked on current item in total."</span>
  <span class="p">(</span><span class="nf">save-excursion</span>
    <span class="p">(</span><span class="nf">save-restriction</span>
      <span class="p">(</span><span class="nf">org-narrow-to-subtree</span><span class="p">)</span>
      <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tstart</span> <span class="s">"2017-08-09"</span><span class="p">)</span> <span class="p">(</span><span class="nf">tend</span> <span class="s">"2017-08-10"</span><span class="p">))</span>
	<span class="p">(</span><span class="nf">org-clock-sum</span>
	 <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tstart</span><span class="p">)</span>
	 <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tend</span><span class="p">))))))</span>

<span class="p">(</span><span class="nf">org-map-entries</span> <span class="ss">'my-org-clock-sum-current-item</span> <span class="s">"emacs"</span> <span class="ss">'agenda</span><span class="p">)</span>
</pre></div>
<p>
And it works!
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-10-org-clock-sum-and-the-time-range-parameters.html" class="u-url">org-clock-sum and the time range parameters</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-10-org-clock-sum-and-the-time-range-parameters.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-10T22:06:00+02:00" title="2017-08-10 22:06">2017-08-10 22:06</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">org-clock-sum and the time range parameters</h2>
<div class="outline-text-2" id="text-1">
<p>
Emacs function org-clock-sum has the following signature
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">org-clock-sum</span> <span class="p">(</span><span class="nf">&amp;optional</span> <span class="nv">tstart</span> <span class="nv">tend</span> <span class="nv">headline-filter</span> <span class="nv">propname</span><span class="p">)</span>
</pre></div>
<p>
where "TSTART and TEND can mark a time range to be considered". So, what kind
of values are TSTART and TEND?
</p>

<p>
Looking at the implementation, you see that org-clock-sum converts these
parameters when they are string values:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">stringp</span> <span class="nv">tstart</span><span class="p">)</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">tstart</span> <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tstart</span><span class="p">)))</span>
<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">stringp</span> <span class="nv">tend</span><span class="p">)</span> <span class="p">(</span><span class="nf">setq</span> <span class="nv">tend</span> <span class="p">(</span><span class="nf">org-time-string-to-seconds</span> <span class="nv">tend</span><span class="p">)))</span>
</pre></div>
<p>
So the first thing we can deduce from this is that TSTART and TEND can each
denote a time string that together denote the "time range to be considered".
</p>

<p>
org-time-string-to-seconds passes this time string to org-time-string-to-time,
which passes it to org-parse-time-string. The documentation of the latter
mentions that it parses "the standard Org-mode time string". A quick Google
search did not turn up a proper definition of this standard string. Some trial
and error seems to indicate that every string that contains a YYYY-MM-DD
substring is valid.
</p>

<p>
All this means that the yesterday's snippet can be simplified to
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my-org-clock-sum-current-item</span> <span class="p">()</span>
  <span class="s">"Return time, clocked on current item in total."</span>
  <span class="p">(</span><span class="nf">save-excursion</span>
    <span class="p">(</span><span class="nf">save-restriction</span>
      <span class="p">(</span><span class="nf">org-narrow-to-subtree</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">org-clock-sum</span> <span class="s">"2017-08-09"</span> <span class="s">"2017-08-10"</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">org-map-entries</span> <span class="ss">'my-org-clock-sum-current-item</span> <span class="s">"emacs"</span> <span class="ss">'agenda</span><span class="p">)</span><span class="nv">y</span>
</pre></div>

<p>
I do not think passing strings to org-clock-sum is the approach to take. In the
end we have to call org-clock-sum on subsequent days. Unless org-mode has some
functions to "increase" a time string by one day, this might be difficult using
strings.
</p>

<p>
Fortunately, org-clock-sum also seems to work with seconds. Once the time
strings are converted to seconds, the rest of org-clock-sum works with these
seconds. So probably we can just pass in TSTART and TEND as seconds.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-09-summarizing-the-clocking-time-in-a-journal-entry.html" class="u-url">Summarizing the clocking time in a journal entry</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-09-summarizing-the-clocking-time-in-a-journal-entry.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-09T23:38:00+02:00" title="2017-08-09 23:38">2017-08-09 23:38</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Summarizing the clocking time in a journal entry</h2>
<div class="outline-text-2" id="text-1">
<p>
I would like to use org-mode and org-journal to keep track of the time worked
for a specific customer. A single journal entry could then register the time
worked for that day, but also for other days.
</p>

<p>
org-mode stores the clocked work time in a so-called LOGBOOK drawer of a
headline. To give an example, the following LOGBOOK specifies I worked from
9:00 to 17:00 on Tuesday, August 8 2017:
</p>
<pre class="example">
:LOGBOOK:
CLOCK: [2017-08-08 Tue 22:45]--[2017-08-08 Tue 22:50] =&gt;  0:05
CLOCK: [2017-08-09 Wed 22:45]--[2017-08-09 Wed 22:50] =&gt;  0:05
:END:
</pre>
<p>
As mentioned, I would like to be able to clock more times in the same LOGBOOK.
</p>

<p>
Using Emacs function org-clock-report you can insert a clocking table with the
total clocking times in a certain time window. Although that function accepts a
lot of parameters to customize its output, I could not use it to create one
table that contained an overview of hours per day.
</p>

<p>
So I investigated how I could retrieve the required information
programmatically and build the table from that. It was quite a puzzle to find
out how to do that but the following two org-mode functions should make it
possible:
</p>
<ol class="org-ol">
<li>org-map-entries, which calls a given function on each headline in your
agenda files
</li>
<li>org-clock-sum-current-item, which returns the time clocked on the current
headline
</li>
</ol>
<p>
The following snippet shows how I used this functions to get an initial result:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">my-org-clock-sum-current-item</span> <span class="p">()</span>
  <span class="s">"Return time, clocked on current item in total."</span>
  <span class="p">(</span><span class="nf">save-excursion</span>
    <span class="p">(</span><span class="nf">save-restriction</span>
      <span class="p">(</span><span class="nf">org-narrow-to-subtree</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">org-clock-sum</span> <span class="p">(</span><span class="nf">org-matcher-time</span> <span class="s">"2017-08-09"</span><span class="p">)</span> <span class="p">(</span><span class="nf">org-matcher-time</span> <span class="s">"2017-08-10"</span><span class="p">)))))</span>

<span class="p">(</span><span class="nf">org-map-entries</span> <span class="ss">'my-org-clock-sum-current-item</span> <span class="s">"emacs"</span> <span class="ss">'agenda</span><span class="p">)</span>
</pre></div>
<p>
The last call returns the list of total time clocked on August 9, 2017 for each
headline with tag "emacs".
</p>

<p>
For now, as a proof-of-concept, this suffices but we are not there yet. For
example, org-clock-report accepts a parameter that allows you to specify the
time window as a specific date, week, month etc. It would be nice if I could
also support this "block" parameter - note that org-clock-get-table-data
contains the code to parse this parameter.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-09-adding-the-time-of-a-journal-entry-as-a-property.html" class="u-url">Adding the time of a journal entry as a property</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-09-adding-the-time-of-a-journal-entry-as-a-property.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-09T16:01:00+02:00" title="2017-08-09 16:01">2017-08-09 16:01</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Adding the time of a journal entry as a property</h2>
<div class="outline-text-2" id="text-1">
<p>
By default org-journal prepends each title of a journal entry with time the
entry was started. For example, the current entry was originally titled
</p>
<pre class="example">
16:01 Add the time of a journal entry as a property
</pre>
<p>
I prefer to not have the start time in the title. The following snippet takes
care of that:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-time-format</span> <span class="s">""</span><span class="p">)</span>
</pre></div>

<p>
On the other hand, I do not want to lose that information completely. So I
implemented a hook to automatically enter the time in a property drawer of the
newly created entry:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defun</span> <span class="nv">add-time-as-orgmode-property</span><span class="p">()</span>
  <span class="p">(</span><span class="nf">progn</span>
    <span class="p">(</span><span class="nf">org-insert-property-drawer</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">org-entry-put</span> <span class="p">(</span><span class="nf">point</span><span class="p">)</span> <span class="s">"Time"</span> <span class="p">(</span><span class="nf">format-time-string</span> <span class="s">"%H:%M"</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">re-search-backward</span> <span class="s">"^*"</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">end-of-line</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">'org-journal-after-entry-create-hook</span> <span class="ss">'add-time-as-orgmode-property</span><span class="p">)</span>
</pre></div>
<p>
With this change, the current entry starts as follows
</p>
<pre class="example">
Add the time of a journal entry as a property
:PROPERTIES:
:Time:     16:01
:END:
</pre>
<p>
Note that I left out the '*' symbols that start the heading. If I add them,
org-mode takes that for an actual heading, even if it is inside an example.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-09-finding-journal-entries-from-the-org-mode-agenda-buffer.html" class="u-url">Finding journal entries from the org-mode Agenda buffer</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-09-finding-journal-entries-from-the-org-mode-agenda-buffer.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-09T15:36:00+02:00" title="2017-08-09 15:36">2017-08-09 15:36</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Finding journal entries from the org-mode Agenda buffer</h2>
<div class="outline-text-2" id="text-1">

<p>
The org-mode Agenda buffer allows you to easily list all headlines (such as
journal entries) that match specific tags or properties. For this to work you
have to tell org-mode which files it has to search:
</p>

<ol class="org-ol">
<li>Variable org-agenda-files contains a list of directories and files to
search.
</li>
<li>If an element of org-agenda-files is a directory, org-mode searches through
those files whose name satisfies the regular expression
org-agenda-file-regexp.
</li>
</ol>
<p>
Journal files are placed in directory org-journal-dir, so we extend
org-agenda-files to consider this directory also:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">'org-agenda-files</span> <span class="nv">org-journal-dir</span><span class="p">)</span>
</pre></div>

<p>
This is not enough as org-mode only considers those file that end with
extension .org. By default, journal files do not have that extension - their
name follows the pattern "%Y%m%d". I could extend the regular expression
org-agenda-file-regexp to consider journal files also, but it is easier to let
journal files have the .org extension:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">custom-set-variables</span> <span class="o">'</span><span class="p">(</span><span class="nv">org-journal-file-format</span> <span class="s">"%Y%m%d.org"</span><span class="p">))</span>
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-09-org-journal-search-excludes-the-start-and-end-date.html" class="u-url">org-journal-search excludes the start and end date</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-09-org-journal-search-excludes-the-start-and-end-date.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-09T12:53:00+02:00" title="2017-08-09 12:53">2017-08-09 12:53</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">org-journal-search excludes the start and end date</h2>
<div class="outline-text-2" id="text-1">

<p>
org-journal-search asks for the start and end date of the time window to
search. It turns out that it searches between those dates but not at those
dates.
</p>

<p>
In org-journal.el, function org-journal-search-build-file-list retrieves the
files "within a given time interval". Its implementation shows that it
retrieves the files later than the start of the interval and earlier than the
end of the interval:
</p>
<div class="highlight"><pre><span></span><span class="p">((</span><span class="k">and </span><span class="nv">period-start</span> <span class="nv">period-end</span>
      <span class="p">(</span><span class="nf">time-less-p</span> <span class="nv">period-start</span> <span class="nv">filetime</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">time-less-p</span> <span class="nv">filetime</span> <span class="nv">period-end</span><span class="p">))</span>
 <span class="p">(</span><span class="nf">push</span> <span class="nv">file</span> <span class="nv">result</span><span class="p">))</span>
</pre></div>

<p>
I considered creating a GitHub issue for this but refrained from doing. It
seems it has not been an issue for anybody else in the last years.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-09-issues-when-opening-an-org-journal-file-from-the-calender.html" class="u-url">Issues when opening an org-journal file from the calender</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-09-issues-when-opening-an-org-journal-file-from-the-calender.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-09T11:45:00+02:00" title="2017-08-09 11:45">2017-08-09 11:45</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Issues when opening an org-journal file from the calender</h2>
<div class="outline-text-2" id="text-1">

<p>
org-journal registers all journal entries with the Emacs calendar, which can be
invoked through Emacs function calendar. In the calendar buffer, if you press
'j' on a day that has a journal entry, Emacs opens the journal file in a new
buffer.
</p>

<p>
When I visited the journal file through the calendar, I noticed that the buffer
was in read-only mode, even for the current day. To toggle that mode, use Emacs
function read-only-mode (bound to C-x C-q).
</p>

<p>
Then I noticed that the buffer was not in org-journal-mode. Inspection of
auto-mode-alist showed it an entry for journal files, but only for journal
files in their default directory (and I used another location).
</p>

<p>
I looked through the code of org-journal.el and saw that auto-mode-alist is
updated if you customize org-journal-dir:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">defcustom</span> <span class="nv">org-journal-dir</span> <span class="s">"~/Documents/journal/"</span>
  <span class="nv">:type</span> <span class="ss">'string</span> <span class="nv">:group</span> <span class="ss">'org-journal</span>
  <span class="nv">:set</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">symbol</span> <span class="nv">value</span><span class="p">)</span>
	 <span class="p">(</span><span class="nf">set-default</span> <span class="nv">symbol</span> <span class="nv">value</span><span class="p">)</span>
	 <span class="p">(</span><span class="nf">org-journal-update-auto-mode-alist</span><span class="p">)))</span>
</pre></div>
<p>
In my Emacs config I had changed the variable using setq, which apparently
bypasses the defined setter function. The following snippet shows how to
programmatically update org-journal-dir <i>and</i> invoke the setter function:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">custom-set-variables</span> <span class="o">'</span><span class="p">(</span><span class="nv">org-journal-dir</span> <span class="s">"~/repos/bitbucket.org/journal/"</span><span class="p">))</span>
</pre></div>
<p>
One other thing, org-journal requires the value of org-journal-dir to end with
a slash as it just appends the regular expression for the journal files to this
value.
</p>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2017-08-08-using-org-journal-to-maintain-a-daily-journal.html" class="u-url">Using org-journal to maintain a daily journal</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/pieter-swinkels.html">Pieter Swinkels</a>
            </span></p>
            <p class="dateline"><a href="posts/2017-08-08-using-org-journal-to-maintain-a-daily-journal.html" rel="bookmark"><time class="published dt-published" datetime="2017-08-08T22:16:00+02:00" title="2017-08-08 22:16">2017-08-08 22:16</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Using org-journal to maintain a daily journal</h2>
<div class="outline-text-2" id="text-1">

<p>
Package <a href="https://github.com/bastibe/org-journal">org-journal</a> is an extension to org-mode to easily create and maintain a
daily journal. I installed it and configured it as follows:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">require</span> <span class="ss">'org-journal</span><span class="p">)</span>

<span class="o">#</span> <span class="nv">set</span> <span class="nv">the</span> <span class="nv">directory</span> <span class="nv">that</span> <span class="nv">will</span> <span class="nv">contain</span> <span class="nv">the</span> <span class="nv">journal</span> <span class="nv">files</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-dir</span> <span class="s">"~/repos/bitbucket.org/journal"</span><span class="p">)</span>

<span class="o">#</span> <span class="nv">set</span> <span class="nv">the</span> <span class="nv">format</span> <span class="nv">of</span> <span class="nv">each</span> <span class="nv">date</span> <span class="nv">heading,</span> <span class="nv">where</span>
<span class="o">#</span> <span class="nv">-</span> <span class="nv">%F</span> <span class="nv">specifies</span> <span class="nv">the</span> <span class="nv">ISO</span> <span class="mi">8601</span> <span class="nv">date</span> <span class="nv">format,</span> <span class="nv">e</span><span class="o">.</span><span class="nv">g</span><span class="o">.</span> <span class="mi">2017-08-08</span><span class="o">,</span> <span class="nv">and</span>
<span class="o">#</span> <span class="nv">-</span> <span class="nv">%a</span> <span class="nv">specifies</span> <span class="nv">the</span> <span class="nv">locale</span><span class="ss">'s</span> <span class="nv">abbreviated</span> <span class="nv">name</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">day</span> <span class="nv">of</span> <span class="nv">week</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">org-journal-date-format</span> <span class="s">"%F, %a"</span><span class="p">)</span>
</pre></div>
<p>
For the list of allowed characters in the date format string and their meaning,
have a look at the documentation of Emacs function format-time-string.
</p>

<p>
At the time of writing, my main Linux environment environment variable LC<sub>TIME</sub>
was set to nl<sub>NL</sub>.UTF-8 so the abbreviated name of the week was in Dutch. The
following Emacs settings makes sure that that name is in English:
</p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">system-time-locale</span> <span class="s">"en_US.UTF-8"</span><span class="p">)</span>
</pre></div>
</div>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/welcome-to-nikola.html" class="u-url">Welcome to Nikola</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                <a href="authors/roberto-alsina.html">Roberto Alsina</a>
            </span></p>
            <p class="dateline"><a href="posts/welcome-to-nikola.html" rel="bookmark"><time class="published dt-published" datetime="2012-03-30T23:00:00-03:00" title="2012-03-30 23:00">2012-03-30 23:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<div class="figure">
<a class="reference external image-reference" href="https://farm1.staticflickr.com/138/352972944_4f9d568680_z.jpg?zz=1"><img alt="Nikola Tesla Corner by nicwest, on Flickr" class="thumbnail" src="https://farm1.staticflickr.com/138/352972944_4f9d568680.jpg"></a>
</div>
<p>If you can see this in a web browser, it means you managed to install Nikola,
and build a site using it. Congratulations!</p>
<p>Next steps:</p>
<ul class="simple">
<li><a class="reference external" href="pages/handbook.html">Read the manual</a></li>
<li><a class="reference external" href="https://getnikola.com">Visit the Nikola website to learn more</a></li>
<li><a class="reference external" href="galleries/demo/index.html">See a demo photo gallery</a></li>
<li><a class="reference external" href="pages/listings-demo.html">See a demo listing</a></li>
<li><a class="reference external" href="pages/slides-demo.html">See a demo slideshow</a></li>
<li><a class="reference external" href="pages/dr-nikolas-vendetta.html">See a demo of a longer text</a></li>
</ul>
<p>Send feedback to <a class="reference external" href="mailto:info@getnikola.com">info@getnikola.com</a>!</p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="index-2.html" rel="prev">Newer posts</a>
            </li>
        </ul></nav>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:swinkels.pieter@yahoo.com">Pieter Swinkels</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="assets/js/jquery.min.js"></script><script src="assets/js/bootstrap.min.js"></script><script src="assets/js/moment-with-locales.min.js"></script><script src="assets/js/fancydates.js"></script><script src="assets/js/jquery.colorbox-min.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
